[build]
  publish = "."
  command = """
    if [ ! -d "/opt/build/cache/python_env" ]; then
      echo 'ğŸ Python ê°€ìƒ í™˜ê²½ ìƒì„±...'
      python -m venv /opt/build/cache/python_env
    fi
    source /opt/build/cache/python_env/bin/activate
    if [ ! -d "/opt/build/cache/pip_cache" ]; then
      echo 'ğŸ“‚ pip ìºì‹œ ë””ë ‰í„°ë¦¬ ìƒì„±...'
      mkdir -p /opt/build/cache/pip_cache
    fi
    if [ ! -f "/opt/build/cache/pip_cache/wheelhouse.lock" ]; then
      echo 'ğŸ“¦ ë¼ì´ë¸ŒëŸ¬ë¦¬ ìºì‹œê°€ ì—†ìŠµë‹ˆë‹¤. ìƒˆë¡œ ì„¤ì¹˜í•©ë‹ˆë‹¤.'
      pip install --cache-dir /opt/build/cache/pip_cache -r netlify/functions/my_ai/requirements.txt
      touch /opt/build/cache/pip_cache/wheelhouse.lock
    else
      echo 'âœ… ìºì‹œëœ ë¼ì´ë¸ŒëŸ¬ë¦¬ ì‚¬ìš© ì¤‘!'
    fi
  """

[functions]
  directory = "netlify/functions"
  node_bundler = "esbuild"
  included_files = ["netlify/functions/my_ai/**"]

[[headers]]
  for = "/*"
  [headers.values]
    Cache-Control = "no-cache, no-store, must-revalidate"
    Pragma = "no-cache"
    Expires = "0"

[[redirects]]
  from = "/pwa/*"
  to = "/pwa/:splat"
  status = 200

[[redirects]]
  from = "/*"
  to = "/offline.html"
  status = 200
  condition = {Country = ["XX"]}
